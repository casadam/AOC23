#include "day5.h"

char seedInput[] = "seeds: 3640772818 104094365 1236480411 161072229 376099792 370219099 1590268366 273715765 3224333694 68979978 2070154278 189826014 3855332650 230434913 3033760782 82305885 837883389 177854788 2442602612 571881366\n"
                   "\n"
                   "seed-to-soil map:\n"
                   "496269031 1203272644 52136246\n"
                   "548405277 496269031 457095898\n"
                   "1005501175 953364929 249907715\n"
                   "\n"
                   "soil-to-fertilizer map:\n"
                   "217408321 2086205436 25053699\n"
                   "2604208456 1670861921 31003781\n"
                   "1631572552 0 258383552\n"
                   "129225554 3768288787 36192668\n"
                   "2421205388 2905533654 126666762\n"
                   "242462020 3399542287 357404885\n"
                   "866152503 3032200416 253960559\n"
                   "2039921781 2262442546 381283607\n"
                   "2635212237 2714844607 190689047\n"
                   "3613008578 1753855801 23976114\n"
                   "3636984692 1503365158 167496763\n"
                   "1340671861 2111259135 274956\n"
                   "1889956104 806620565 149965677\n"
                   "0 3286160975 113381312\n"
                   "2987089260 956586242 546778916\n"
                   "2547872150 3756947172 11341615\n"
                   "3846919647 3807789063 43277850\n"
                   "3533868176 258383552 79140402\n"
                   "165418222 1701865702 51990099\n"
                   "1120113062 586061766 220558799\n"
                   "2559213765 2217447855 44994691\n"
                   "3807789063 4255836712 39130584\n"
                   "3890197497 3851066913 404769799\n"
                   "1340946817 1777831915 42087923\n"
                   "2881175496 2111534091 105913764\n"
                   "113381312 2643726153 15844242\n"
                   "1383034740 337523954 248537812\n"
                   "2825901284 2659570395 55274212\n"
                   "599866905 1819919838 266285598\n"
                   "\n"
                   "fertilizer-to-water map:\n"
                   "3950520280 1751042330 139651634\n"
                   "936578795 3912173308 42397072\n"
                   "3553681000 1722281506 28760824\n"
                   "697953317 651809140 90189394\n"
                   "3582441824 876081661 368078456\n"
                   "978975867 2358439651 252255693\n"
                   "1495879532 2678320518 199775133\n"
                   "1910380638 3308279888 122339216\n"
                   "3355092099 1561901004 91630618\n"
                   "3187667509 2033753243 70292073\n"
                   "2752202873 3816184128 41568037\n"
                   "648600286 479585511 49353031\n"
                   "3149600631 2356473769 1965882\n"
                   "1695654665 2629130810 49189708\n"
                   "201901143 385568770 94016741\n"
                   "536376004 741998534 3182157\n"
                   "2472303091 3954570380 279899782\n"
                   "539558161 257732262 15304877\n"
                   "3131165165 2610695344 18435466\n"
                   "3446722717 1890693964 106958283\n"
                   "2793770910 1653531622 40823934\n"
                   "9849113 65680232 192052030\n"
                   "2878736712 2104045316 252428453\n"
                   "1792836692 2878095651 117543946\n"
                   "2172585320 1244160117 273599019\n"
                   "2060645804 3884012463 28160845\n"
                   "3257959582 3719051611 97132517\n"
                   "408449515 745180691 127926489\n"
                   "876081661 4234470162 60497134\n"
                   "1231231560 3043631916 264647972\n"
                   "3151566513 1997652247 36100996\n"
                   "2446184339 3430619104 26118752\n"
                   "803816626 582518586 69290554\n"
                   "554863038 9849113 40157204\n"
                   "2146325022 3857752165 26260298\n"
                   "788142711 50006317 15673915\n"
                   "295917884 273037139 112531631\n"
                   "2834594844 1517759136 44141868\n"
                   "4090171914 3456737856 204795382\n"
                   "2088806649 3661533238 57518373\n"
                   "1744844373 2995639597 47992319\n"
                   "2032719854 1694355556 27925950\n"
                   "595020242 528938542 53580044\n"
                   "\n"
                   "water-to-light map:\n"
                   "556810106 840812947 14926117\n"
                   "2598413684 2184905392 114045192\n"
                   "2130064037 1600958027 248227533\n"
                   "1271028210 1253957270 39538107\n"
                   "3521286912 4262821917 32145379\n"
                   "1930562940 1944404618 64932992\n"
                   "4252373354 3302720391 42593942\n"
                   "1109026743 279496091 162001467\n"
                   "725777554 2565853410 3969864\n"
                   "2712458876 1330352326 185715465\n"
                   "4039742261 3173278185 129442206\n"
                   "0 2064417497 120487895\n"
                   "299311037 855739064 257499069\n"
                   "729747418 1849185560 95219058\n"
                   "1373001379 767226476 66231296\n"
                   "571736223 688212171 79014305\n"
                   "1878676528 2890412515 51886412\n"
                   "2898174341 682278717 5933454\n"
                   "1781236499 441497558 97440029\n"
                   "3090089298 3673052565 50139248\n"
                   "1365646204 833457772 7355175\n"
                   "1738475707 2412172480 42760792\n"
                   "1995495932 2569823274 134568105\n"
                   "3193548680 3476912261 196140304\n"
                   "824966476 538937587 143341130\n"
                   "3553432291 3723191813 486309970\n"
                   "3140228546 4209501783 53320134\n"
                   "968307606 1113238133 140719137\n"
                   "4169184467 3090089298 83188887\n"
                   "650750528 204469065 75027026\n"
                   "1439232675 2704391379 186021136\n"
                   "2511835025 1516067791 84890236\n"
                   "1625253811 2298950584 113221896\n"
                   "3389688984 3345314333 131597928\n"
                   "2378291570 0 22623317\n"
                   "2596725261 2942298927 1688423\n"
                   "1310566317 2009337610 55079887\n"
                   "2940964744 201446459 3022606\n"
                   "120487895 22623317 178823142\n"
                   "2904107795 1293495377 36856949\n"
                   "2400914887 2454933272 110920138\n"
                   "\n"
                   "light-to-temperature map:\n"
                   "1244459013 624435822 80444775\n"
                   "2608592263 3309263777 172991510\n"
                   "3165402867 2278806547 335097905\n"
                   "292819381 1643978777 105413752\n"
                   "704475267 462426854 15399493\n"
                   "3696584161 2678497330 345840247\n"
                   "2891254573 3613542439 34162874\n"
                   "1894523870 281665589 180761265\n"
                   "1706897891 1456352798 187625979\n"
                   "398233133 1877125477 198159658\n"
                   "4176101046 3482255287 104541624\n"
                   "2278806547 3662029939 329785716\n"
                   "3500500772 4098883907 196083389\n"
                   "4280642670 3647705313 14324626\n"
                   "4149492660 3024337577 11203522\n"
                   "85784517 0 207034864\n"
                   "2925417447 3231118601 78145176\n"
                   "0 1749392529 85784517\n"
                   "4160696182 3215713737 15404864\n"
                   "4042424408 3991815655 107068252\n"
                   "1129076520 207034864 74630725\n"
                   "596392791 1348270322 108082476\n"
                   "3100809989 2613904452 64592878\n"
                   "1326100451 1114082357 234187965\n"
                   "2864509045 3586796911 26745528\n"
                   "2781583773 3132788465 82925272\n"
                   "1560288416 477826347 146609475\n"
                   "3003562623 3035541099 97247366\n"
                   "719874760 704880597 409201760\n"
                   "1324903788 1875928814 1196663\n"
                   "1203707245 1835177046 40751768\n"
                   "\n"
                   "temperature-to-humidity map:\n"
                   "2622049454 736812858 79169969\n"
                   "3979548277 2854489162 116161222\n"
                   "0 2175018874 84480806\n"
                   "567798788 2400631546 48501534\n"
                   "3627076350 2837901836 16587326\n"
                   "1459224370 1289368272 21397154\n"
                   "3018037189 3252694507 93925363\n"
                   "4095709499 4063232797 21404553\n"
                   "1675574530 2560175285 695067\n"
                   "650203851 328659590 327259736\n"
                   "3143763337 3475937023 49576\n"
                   "1591893253 2091337597 83681277\n"
                   "3655324442 3516768137 39649206\n"
                   "1125784995 2259499680 94582805\n"
                   "1082589333 280432563 43195662\n"
                   "1676269597 1011614859 3965286\n"
                   "3955996260 4039680780 23552017\n"
                   "2701219423 684725863 52086995\n"
                   "977463587 2387091631 13539915\n"
                   "3643663676 3346619870 11660766\n"
                   "3143812913 3556417343 483263437\n"
                   "2907111949 3358280636 110925240\n"
                   "2293944099 2615629615 132579811\n"
                   "991003502 920029028 91585831\n"
                   "1513630670 1015580145 78262583\n"
                   "196718861 1310765426 316320664\n"
                   "1680234883 1638774240 331394507\n"
                   "2011629390 815982827 1882146\n"
                   "2874635247 4084637350 32476702\n"
                   "3701704795 2998403042 254291465\n"
                   "2426523910 1093842728 195525544\n"
                   "2837901836 3475986599 8980753\n"
                   "3694973648 3469205876 6731147\n"
                   "3111962552 3484967352 31800785\n"
                   "616300322 662956301 21769562\n"
                   "1220367800 1627086090 10492300\n"
                   "1480621524 2354082485 33009146\n"
                   "2846882589 2970650384 27752658\n"
                   "1352028950 323628225 5031365\n"
                   "2753306418 655919326 7036975\n"
                   "513039525 2560870352 54759263\n"
                   "84480806 1637578390 1195850\n"
                   "2013511536 0 280432563\n"
                   "85676656 2449133080 111042205\n"
                   "1357060315 817864973 102164055\n"
                   "638069884 2748209426 12133967\n"
                   "1230860100 1970168747 121168850\n"
                   "\n"
                   "humidity-to-location map:\n"
                   "3071447765 3790677895 35519893\n"
                   "501148922 1470714761 60946444\n"
                   "949413779 3960084356 1114317\n"
                   "2276139972 547813284 42132370\n"
                   "261623667 0 220957931\n"
                   "0 220957931 207965683\n"
                   "2629055810 2988733812 367963097\n"
                   "936813255 2507216386 12600524\n"
                   "3106967658 2402339659 33240399\n"
                   "909841910 3356696909 11084951\n"
                   "1030029700 920191219 341387512\n"
                   "2503236334 3572469232 125819476\n"
                   "1371417212 1666455982 273052538\n"
                   "2997018907 3367781860 25674024\n"
                   "3311094548 2519816910 468916902\n"
                   "2021404744 1531661205 83389724\n"
                   "3140208057 1939508520 59879232\n"
                   "259387264 428923614 2236403\n"
                   "950528096 1334878052 79501604\n"
                   "2446901229 1414379656 56335105\n"
                   "1644469750 3393455884 140294896\n"
                   "3022692931 3698288708 48754834\n"
                   "4042169428 1999387752 252797868\n"
                   "1805974329 3981490698 215430415\n"
                   "1784764646 501148922 21209683\n"
                   "889549885 3961198673 20292025\n"
                   "3780011450 522358605 10399946\n"
                   "2104794468 1261578731 73299321\n"
                   "3790411396 3842084182 118000174\n"
                   "2318272342 2252185620 113574154\n"
                   "4003450976 3533750780 38718452\n"
                   "2178093789 4196921113 98046183\n"
                   "3908411570 3747043542 43634353\n"
                   "562095366 2435580058 71636328\n"
                   "2431846496 532758551 15054733\n"
                   "920926861 3826197788 15886394\n"
                   "3952045923 1615050929 51405053\n"
                   "207965683 431160017 51421581\n"
                   "633731694 2365759774 36579885\n"
                   "670311579 700952913 219238306\n"
                   "3200087289 589945654 111007259";

void SEEDS() {
    Node *pairs = calloc(sizeof(Node), 1);
    Node *pairIter = pairs;
    int arrCount = 0;
    int i = 7;
    int y = 0;
    char temp[25];
    while (seedInput[i - 1] != '\n') {
        temp[y] = seedInput[i];
        y++;
        if (seedInput[i] == ' ' || seedInput[i] == '\n') {
            sscanf(temp, "%lu", &pairIter->num);
            pairIter->link = calloc(sizeof(Node), 1);
            pairIter = pairIter->link;
            arrCount++;
            strcpy(temp, "\0");
            y = 0;
        }
        i++;
    }
    pairIter->link = NULL;
    pairIter = pairs;
    Map *mapNums = calloc(sizeof(Map), 1);
    Map *mapIter = mapNums;
    char *mapLine = strtok(seedInput, "\n");
    while (mapLine != NULL) {
        if (!isdigit(*mapLine)) {
            for (int j = 0; j < 3; ++j) {
                mapIter->nums[j] = 0;
            }
        }
        else sscanf(mapLine, "%lu %lu %lu", &mapIter->nums[0], &mapIter->nums[1], &mapIter->nums[2]);
        mapIter->link = calloc(sizeof(Map), 1);
        mapIter = mapIter->link;
        mapLine = strtok(NULL, "\n");
    }
    mapIter->link = NULL;

    unsigned long min = -1;
    while (pairIter->link != NULL) {
        printf("\ncurrently parsed: %lu\n", pairIter->num);
        int start = pairIter->num;
        pairIter = pairIter->link;
        int range = pairIter->num;
        for (int j = start; j < start + range; ++j) {
            if (j % 10000000 == 0) printf(". ");
            int currNum = j;
            bool modified = false;
            mapIter = mapNums;
            while (mapIter->link != NULL) {
                if (mapIter->nums[2] == 0) {
                    mapIter = mapIter->link;
                    modified = false;
                    continue;
                }
                if (currNum >= mapIter->nums[1] && currNum < (mapIter->nums[1] + mapIter->nums[2]) && !modified) {
                        currNum = mapIter->nums[0] + (currNum - mapIter->nums[1]);
                        modified = true;
                }
                mapIter = mapIter->link;
            }
            if (currNum < min) { min = currNum; printf("\ncurr min: %lu", min); }
        }
        pairIter = pairIter->link;
    }
    printf("\nMIN LOC: %lu", min);
}